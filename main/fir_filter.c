#include "fir_filter.h"

#if CONFIG_FILTER_FIR_IIR || CONFIG_FILTER_FIR
// FIR коефициенти и линии на закъснение

static __attribute__((aligned(16))) float fir_coeffs[FIR_COEFFS_LEN] = {

     0.00010193725766375815, -4.766956291329487e-06, 2.6048495058559937e-05, 0.00011230551342491466,
0.00011340119115766852, 6.562403410184836e-05, 9.923349098474257e-05, 0.00018919929954733518,
0.00017958949043897238, 5.051712786761099e-05, -2.7919952009985284e-05, 4.325884111384319e-05,
0.00014760212007789198, 0.00016085840471845753, 0.00015163789087381343, 0.00023670238853713065,
0.0003500711414723827, 0.00033515871762793234, 0.00021223208048399823, 0.0001630325268116627,
0.0002477208066463657, 0.00032351024963971905, 0.00029366616369175757, 0.0002587895476101244,
0.00031787586752800567, 0.0003719936128681925, 0.0002804207834520509, 0.00011029960658620039,
4.951616086275848e-05, 0.00011872476653135636, 0.0001598948816185096, 0.00011131409843118714,
9.779334389544359e-05, 0.00018933862517542713, 0.0002545355813009234, 0.00017330898601026804,
5.177999001348134e-05, 6.650214095838917e-05, 0.00019045651107877664, 0.00025497414236181563,
0.00023378921376278653, 0.00026452353528803223, 0.00038023402759381674, 0.00042478727244096577,
0.00031040397018574056, 0.00018167524306458225, 0.00019804126210966994, 0.00029152638917724416,
0.0002998806438000458, 0.000240628330139694, 0.00025966631813529185, 0.0003526973277338016,
0.00035081233179278, 0.00020734022500634537, 9.774485610405701e-05, 0.00015190382882720438,
0.00026057863420792, 0.0002737065140018196, 0.0002463148859806898, 0.00031574852229334266,
0.00043229491745004584, 0.00041968922080916425, 0.000273836059967168, 0.00018936650267512025,
0.00025716707579216387, 0.00033394552510989745, 0.0002947480126339575, 0.00023319085033374594,
0.0002728267344936373, 0.00032548847272126824, 0.0002256320967771343, 2.0962498719505756e-05,
-8.004549348952954e-05, -2.7716750636688824e-05, 1.1853346162188325e-05, -5.149748846810824e-05,
-9.250189023257884e-05, -1.4433925654104367e-05, 5.505553775557276e-05, -3.307982846786039e-05,
-0.0001861060825951783, -0.00020077791905213284, -7.951291614906607e-05, -7.0038217076636815e-06,
-3.677563962939859e-05, -2.3545308223805344e-05, 9.23125117798604e-05, 0.0001504699336191418,
3.18655540295486e-05, -0.0001246669907527609, -0.00012793982765872789, -2.7071086834807976e-05,
-6.859937147791514e-06, -7.317433589964507e-05, -6.487739782972135e-05, 3.864124539416347e-05,
5.651864070467183e-05, -8.90905453033713e-05, -0.00021977766112450052, -0.00017075886269975486,
-3.9930217468815856e-05, -5.508544000176106e-06, -3.068005224563725e-05, 4.3256337923006045e-05,
0.00018707682485328127, 0.00020443669650753617, 6.184249801152658e-05, -3.448647513297456e-05,
4.193967848710388e-05, 0.00015045379568333667, 0.0001342207836583948, 7.56837256170512e-05,
0.00012500327721399833, 0.0002087914218055771, 0.00013490155731619093, -7.355240866992082e-05,
-0.00018730404418958508, -0.0001220654151569747, -5.005673090224057e-05, -9.456909026226845e-05,
-0.00013318658904599978, -3.920455267217749e-05, 6.689657140726977e-05, 3.901427690603795e-06,
-0.00015376278107157466, -0.00017440749956737958, -3.002325685421597e-05, 7.907442192919553e-05,
6.662171206498407e-05, 8.340298113239995e-05, 0.00021983641550926556, 0.00031381978911529374,
0.00021056084149478755, 3.897940231287052e-05, 2.5452923105788836e-05, 0.00014549192041932968,
0.0001906273765009458, 0.00012588830416121124, 0.00012707965485577323, 0.000244760909563257,
0.0002873497603069011, 0.0001404749629988189, -1.7404443525376007e-05, 1.8445833362031117e-05,
0.00016669052015776196, 0.00021820609861828393, 0.00018599314392193773, 0.00025115187499674424,
0.00041025191302385155, 0.0004465034382804755, 0.0002909770274118122, 0.00016012095749886425,
0.00022235278995338655, 0.00034378355627676777, 0.0003314011709056573, 0.0002515106878862496,
0.0002836575633401526, 0.00037444188875405374, 0.0003031271412342379, 6.21130573354161e-05,
-9.791530631105358e-05, -5.069602226390861e-05, 2.8175296135999322e-05, -2.3286463674324898e-05,
-8.937102901766956e-05, -9.042957180459008e-06, 0.00010887944090206427, 4.721384766914129e-05,
-0.00014379991051999958, -0.0002014519218299283, -5.963383608838427e-05, 6.646169534724244e-05,
5.112357030032566e-05, 4.81293763767467e-05, 0.00018421070049726713, 0.0002986496986476851,
0.0001953878802656469, -1.1624641985997406e-05, -5.617275558241324e-05, 6.940744733992652e-05,
0.0001316227923544876, 5.918720437059172e-05, 4.1933159948725854e-05, 0.00016681933554698404,
0.00023302661988679427, 8.274823323373814e-05, -0.0001091310923034918, -9.134201326762156e-05,
7.801405618568766e-05, 0.00015522289010613853, 0.00012215005243790372, 0.00018355084506646514,
0.0003684274545722834, 0.00043875570202943235, 0.00028213291011726344, 0.0001234235986100707,
0.00018111172375300956, 0.00033323712738092775, 0.00034470501266889734, 0.0002589856767259016,
0.0002884119539105581, 0.0004059996397240173, 0.00035937310393828427, 0.00010192069623766302,
-9.35253380159954e-05, -4.9229180468838155e-05, 5.909354834328892e-05, 2.3067963586279816e-05,
-5.3618049658962205e-05, 2.988691922744875e-05, 0.00018191618986420518, 0.00014382484266967237,
-6.635068127486778e-05, -0.000151504685167582, 2.5836432924552388e-06, 0.00016646515757646823,
0.00016573730097860944, 0.00015368562820390716, 0.00030052438390164597, 0.00045073646424871323,
0.00035922745787393836, 0.00011816053261957837, 3.9944784338035305e-05, 0.00017443605393518334,
0.00026104375037636096, 0.0001823365364959654, 0.00014138443427578977, 0.0002702150890671052,
0.0003605157027148643, 0.0002015458266733086, -4.006610881311902e-05, -5.7235647335419335e-05,
0.00012431499159842004, 0.00022117975829100375, 0.0001742280341666642, 0.00021388087153368558,
0.0004107489606771036, 0.0005043665483780969, 0.00032792067586698623, 0.00011269382839497767,
0.00013893689003368565, 0.0003038798943128658, 0.00032226256614388706, 0.0002058106297340527,
0.0002048181074202661, 0.0003277980895022172, 0.0002864790836430555, -1.600637698344994e-05,
-0.00028297365015486696, -0.00027138662973054704, -0.00015235691896788343, -0.00019126527796619103,
-0.00030342252039290197, -0.00023996477230678036, -6.758495792304145e-05, -9.41709242210825e-05,
-0.00034482617573085663, -0.00048256504482418794, -0.00033043042866727935, -0.0001312281924308011,
-0.00012108396427830042, -0.00015172132286634266, 1.110083302638608e-06, 0.000192412632822733,
0.00011677293880065166, -0.00016486138155291094, -0.00028417132218280555, -0.00013449325857429155,
-6.724886243302491e-06, -7.864531400351207e-05, -0.00013477392427633562, 1.4604908793591882e-05,
0.00015577739456239367, 1.0926200873607455e-05, -0.0002681499919199497, -0.0003046463890103065,
-7.871515044603785e-05, 7.856510358480164e-05, 5.242460291469788e-05, 0.00010201130520740944,
0.00035276123510866387, 0.0005192084819723282, 0.0003634582603967794, 0.00012037890993425699,
0.00014945002566279584, 0.00037735713728506915, 0.00045589989486249395, 0.00035149793047423595,
0.00036008744789816667, 0.0005387017415431721, 0.0005557981115137155, 0.0002468271847891095,
-6.496471294461801e-05, -5.0413702959773975e-05, 0.0001303903106225772, 0.00013819548872405642,
2.790641283913428e-05, 0.0001087831914989818, 0.00035030029043127387, 0.0003824164604170766,
0.00011978710970641237, -5.203261048410791e-05, 0.00012904053413879257, 0.0004074417194377,
0.00046456180267675216, 0.000436707881730034, 0.0006185137347116708, 0.0008830169753567872,
0.0008460548221564932, 0.0005226496551321787, 0.00035278996666957246, 0.0005228642625989252,
0.0007059802557531553, 0.0006413729658304443, 0.0005560604399060727, 0.0007176025837890899,
0.0009096048241957108, 0.0007642051005544051, 0.00040843224509072427, 0.0003119443482777959,
0.0005614373436294343, 0.0007649569953557268, 0.0007287289864112575, 0.0007464061906099084,
0.0010199733307243205, 0.0012343680681300832, 0.0010534415286231604, 0.000712065880861382,
0.0006786537435995712, 0.0009263933093725934, 0.0010230171341230922, 0.0008679511604306094,
0.0008166048120073278, 0.0009964952871603287, 0.0010202405995517218, 0.0006269354827903739,
0.00017235928266843236, 0.00010795092517844475, 0.0002956237177176535, 0.00029391822903949955,
0.00011073083779460457, 0.00013793082622835554, 0.0004004102514950992, 0.00044364150539682675,
9.340711671869896e-05, -0.00019969793053737338, -4.89300743167613e-05, 0.00027834308626672045,
0.000345179807628589, 0.00026488548217639297, 0.0004318965276193462, 0.0007501832324887906,
0.000724003188693795, 0.0002972296869883827, 1.0709332265339036e-05, 0.00017162729089142926,
0.0004065027457027019, 0.0003312311697818181, 0.00018371590772036197, 0.00034596161352875215,
0.000602977266625613, 0.0004546060483461426, -1.4344677097466105e-05, -0.00019828990266199486,
9.499806756710362e-05, 0.0003875435605243965, 0.00036341773551767204, 0.00036201051387153995,
0.0007018207470342227, 0.001028169998282366, 0.0008549114382512184, 0.0004105632823553228,
0.00032873871987626707, 0.0006604114148627502, 0.0008478513770037561, 0.0006818954604054941,
0.0006040148923225318, 0.0008533661791131334, 0.0009605820509734195, 0.0005118757247616451,
-9.258360709940931e-05, -0.0002086492756048892, 6.775698839368357e-05, 0.00013587783394535292,
-7.761130475841204e-05, -5.4224924723601316e-05, 0.0003233044922710566, 0.00046924927645412243,
6.21486242205853e-05, -0.00034878262186435613, -0.00017227706527808662, 0.0003129774295814792,
0.00047723295756022324, 0.0003881670531822404, 0.0006006304573354709, 0.001074716007655252,
0.0011327815812347203, 0.0005942781356649521, 0.00016292377702356418, 0.0003533486561095558,
0.0007217632505390655, 0.0006739530540073882, 0.0004578789229923493, 0.0006491073980811524,
0.0010416102212820356, 0.0009094762050204122, 0.00025732102162371917, -7.721000348588728e-05,
0.00028967342474871694, 0.0007374011086798942, 0.0007314288093655352, 0.00068343599890472,
0.0011195730391240048, 0.0016217754248937235, 0.0014344195278485064, 0.0007658706311788519,
0.0005472556321577938, 0.0009811772235659769, 0.001287159757228364, 0.0010498543363435205,
0.0008617505135641663, 0.001173101686174864, 0.0013688419980871103, 0.0007445733294397492,
-0.00022482625919046674, -0.0005267612586220175, -0.00016345848680675754, -3.681795418359146e-05,
-0.0003860774728538252, -0.00045240985622311793, 6.955890534207029e-05, 0.0003423815479118496,
-0.00025439335001231574, -0.0009836534445200097, -0.0008362698133932185, -9.877187376257994e-05,
0.00020767770978112, 4.5062919693181166e-05, 0.00029576514165490295, 0.0010464306957885762,
0.0012413805191648537, 0.0004247417105744332, -0.00036114264316041615, -0.00014399109712540396,
0.0004963422574728619, 0.000503425213350935, 0.0001327672997115903, 0.00038994309572890073,
0.0011019067291046657, 0.001031595176198302, -1.6784584231786925e-05, -0.0006758232793508703,
-9.584164977124716e-05, 0.0007847117336537961, 0.0009025824723027163, 0.0008262448779363424,
0.0015909612423269286, 0.002637958267506757, 0.0025341601814982953, 0.0014116473234299114,
0.0009553808605027073, 0.0017860851432474187, 0.0025587581525034642, 0.0022940387341312666,
0.001967681084643192, 0.0026138891985594704, 0.0032327870690572573, 0.002287575977134744,
0.0004282597632254301, -0.00026666129593690493, 0.0005192199049505425, 0.0010071561495281582,
0.00042594444464390095, 0.000253731838706334, 0.0014137104566982772, 0.002287552387393548,
0.0012415900992404421, -0.000415756750346784, -0.00023489338861530862, 0.0015476395043105744,
0.002543944857458358, 0.0022764917184594532, 0.002820429469611343, 0.004800272220485596,
0.0057034488068624925, 0.003867569175716424, 0.0016342573438393722, 0.00198596850267815,
0.0038905798311439197, 0.004202513112007688, 0.003088389834039736, 0.0036338718679381227,
0.005980757182658324, 0.006213832027827744, 0.0027642179817989427, -0.00014678688077111637,
0.0014036133244090493, 0.004872992672357864, 0.005623564424888507, 0.005022141754625132,
0.008130820082554998, 0.013844327374649402, 0.014611700057435265, 0.008516255211166182,
0.004505104342702583, 0.009769088141441987, 0.017651591093560067, 0.01752188021040975,
0.014501026798850715, 0.027064744726092115, 0.06017047714031795, 1.0,
0.09081685679494036, 0.06017047714031795, 0.027064744726092115, 0.014501026798850715,
0.01752188021040975, 0.017651591093560067, 0.009769088141441987, 0.004505104342702583,
0.008516255211166182, 0.014611700057435265, 0.013844327374649402, 0.008130820082554998,
0.005022141754625132, 0.005623564424888507, 0.004872992672357864, 0.0014036133244090493,
-0.00014678688077111637, 0.0027642179817989427, 0.006213832027827744, 0.005980757182658324,
0.0036338718679381227, 0.003088389834039736, 0.004202513112007688, 0.0038905798311439197,
0.00198596850267815, 0.0016342573438393722, 0.003867569175716424, 0.0057034488068624925,
0.004800272220485596, 0.002820429469611343, 0.0022764917184594532, 0.002543944857458358,
0.0015476395043105744, -0.00023489338861530862, -0.000415756750346784, 0.0012415900992404421,
0.002287552387393548, 0.0014137104566982772, 0.000253731838706334, 0.00042594444464390095,
0.0010071561495281582, 0.0005192199049505425, -0.00026666129593690493, 0.0004282597632254301,
0.002287575977134744, 0.0032327870690572573, 0.0026138891985594704, 0.001967681084643192,
0.0022940387341312666, 0.0025587581525034642, 0.0017860851432474187, 0.0009553808605027073,
0.0014116473234299114, 0.0025341601814982953, 0.002637958267506757, 0.0015909612423269286,
0.0008262448779363424, 0.0009025824723027163, 0.0007847117336537961, -9.584164977124716e-05,
-0.0006758232793508703, -1.6784584231786925e-05, 0.001031595176198302, 0.0011019067291046657,
0.00038994309572890073, 0.0001327672997115903, 0.000503425213350935, 0.0004963422574728619,
-0.00014399109712540396, -0.00036114264316041615, 0.0004247417105744332, 0.0012413805191648537,
0.0010464306957885762, 0.00029576514165490295, 4.5062919693181166e-05, 0.00020767770978112,
-9.877187376257994e-05, -0.0008362698133932185, -0.0009836534445200097, -0.00025439335001231574,
0.0003423815479118496, 6.955890534207029e-05, -0.00045240985622311793, -0.0003860774728538252,
-3.681795418359146e-05, -0.00016345848680675754, -0.0005267612586220175, -0.00022482625919046674,
0.0007445733294397492, 0.0013688419980871103, 0.001173101686174864, 0.0008617505135641663,
0.0010498543363435205, 0.001287159757228364, 0.0009811772235659769, 0.0005472556321577938,
0.0007658706311788519, 0.0014344195278485064, 0.0016217754248937235, 0.0011195730391240048,
0.00068343599890472, 0.0007314288093655352, 0.0007374011086798942, 0.00028967342474871694,
-7.721000348588728e-05, 0.00025732102162371917, 0.0009094762050204122, 0.0010416102212820356,
0.0006491073980811524, 0.0004578789229923493, 0.0006739530540073882, 0.0007217632505390655,
0.0003533486561095558, 0.00016292377702356418, 0.0005942781356649521, 0.0011327815812347203,
0.001074716007655252, 0.0006006304573354709, 0.0003881670531822404, 0.00047723295756022324,
0.0003129774295814792, -0.00017227706527808662, -0.00034878262186435613, 6.21486242205853e-05,
0.00046924927645412243, 0.0003233044922710566, -5.4224924723601316e-05, -7.761130475841204e-05,
0.00013587783394535292, 6.775698839368357e-05, -0.0002086492756048892, -9.258360709940931e-05,
0.0005118757247616451, 0.0009605820509734195, 0.0008533661791131334, 0.0006040148923225318,
0.0006818954604054941, 0.0008478513770037561, 0.0006604114148627502, 0.00032873871987626707,
0.0004105632823553228, 0.0008549114382512184, 0.001028169998282366, 0.0007018207470342227,
0.00036201051387153995, 0.00036341773551767204, 0.0003875435605243965, 9.499806756710362e-05,
-0.00019828990266199486, -1.4344677097466105e-05, 0.0004546060483461426, 0.000602977266625613,
0.00034596161352875215, 0.00018371590772036197, 0.0003312311697818181, 0.0004065027457027019,
0.00017162729089142926, 1.0709332265339036e-05, 0.0002972296869883827, 0.000724003188693795,
0.0007501832324887906, 0.0004318965276193462, 0.00026488548217639297, 0.000345179807628589,
0.00027834308626672045, -4.89300743167613e-05, -0.00019969793053737338, 9.340711671869896e-05,
0.00044364150539682675, 0.0004004102514950992, 0.00013793082622835554, 0.00011073083779460457,
0.00029391822903949955, 0.0002956237177176535, 0.00010795092517844475, 0.00017235928266843236,
0.0006269354827903739, 0.0010202405995517218, 0.0009964952871603287, 0.0008166048120073278,
0.0008679511604306094, 0.0010230171341230922, 0.0009263933093725934, 0.0006786537435995712,
0.000712065880861382, 0.0010534415286231604, 0.0012343680681300832, 0.0010199733307243205,
0.0007464061906099084, 0.0007287289864112575, 0.0007649569953557268, 0.0005614373436294343,
0.0003119443482777959, 0.00040843224509072427, 0.0007642051005544051, 0.0009096048241957108,
0.0007176025837890899, 0.0005560604399060727, 0.0006413729658304443, 0.0007059802557531553,
0.0005228642625989252, 0.00035278996666957246, 0.0005226496551321787, 0.0008460548221564932,
0.0008830169753567872, 0.0006185137347116708, 0.000436707881730034, 0.00046456180267675216,
0.0004074417194377, 0.00012904053413879257, -5.203261048410791e-05, 0.00011978710970641237,
0.0003824164604170766, 0.00035030029043127387, 0.0001087831914989818, 2.790641283913428e-05,
0.00013819548872405642, 0.0001303903106225772, -5.0413702959773975e-05, -6.496471294461801e-05,
0.0002468271847891095, 0.0005557981115137155, 0.0005387017415431721, 0.00036008744789816667,
0.00035149793047423595, 0.00045589989486249395, 0.00037735713728506915, 0.00014945002566279584,
0.00012037890993425699, 0.0003634582603967794, 0.0005192084819723282, 0.00035276123510866387,
0.00010201130520740944, 5.242460291469788e-05, 7.856510358480164e-05, -7.871515044603785e-05,
-0.0003046463890103065, -0.0002681499919199497, 1.0926200873607455e-05, 0.00015577739456239367,
1.4604908793591882e-05, -0.00013477392427633562, -7.864531400351207e-05, -6.724886243302491e-06,
-0.00013449325857429155, -0.00028417132218280555, -0.00016486138155291094, 0.00011677293880065166,
0.000192412632822733, 1.110083302638608e-06, -0.00015172132286634266, -0.00012108396427830042,
-0.0001312281924308011, -0.00033043042866727935, -0.00048256504482418794, -0.00034482617573085663,
-9.41709242210825e-05, -6.758495792304145e-05, -0.00023996477230678036, -0.00030342252039290197,
-0.00019126527796619103, -0.00015235691896788343, -0.00027138662973054704, -0.00028297365015486696,
-1.600637698344994e-05, 0.0002864790836430555, 0.0003277980895022172, 0.0002048181074202661,
0.0002058106297340527, 0.00032226256614388706, 0.0003038798943128658, 0.00013893689003368565,
0.00011269382839497767, 0.00032792067586698623, 0.0005043665483780969, 0.0004107489606771036,
0.00021388087153368558, 0.0001742280341666642, 0.00022117975829100375, 0.00012431499159842004,
-5.7235647335419335e-05, -4.006610881311902e-05, 0.0002015458266733086, 0.0003605157027148643,
0.0002702150890671052, 0.00014138443427578977, 0.0001823365364959654, 0.00026104375037636096,
0.00017443605393518334, 3.9944784338035305e-05, 0.00011816053261957837, 0.00035922745787393836,
0.00045073646424871323, 0.00030052438390164597, 0.00015368562820390716, 0.00016573730097860944,
0.00016646515757646823, 2.5836432924552388e-06, -0.000151504685167582, -6.635068127486778e-05,
0.00014382484266967237, 0.00018191618986420518, 2.988691922744875e-05, -5.3618049658962205e-05,
2.3067963586279816e-05, 5.909354834328892e-05, -4.9229180468838155e-05, -9.35253380159954e-05,
0.00010192069623766302, 0.00035937310393828427, 0.0004059996397240173, 0.0002884119539105581,
0.0002589856767259016, 0.00034470501266889734, 0.00033323712738092775, 0.00018111172375300956,
0.0001234235986100707, 0.00028213291011726344, 0.00043875570202943235, 0.0003684274545722834,
0.00018355084506646514, 0.00012215005243790372, 0.00015522289010613853, 7.801405618568766e-05,
-9.134201326762156e-05, -0.0001091310923034918, 8.274823323373814e-05, 0.00023302661988679427,
0.00016681933554698404, 4.1933159948725854e-05, 5.918720437059172e-05, 0.0001316227923544876,
6.940744733992652e-05, -5.617275558241324e-05, -1.1624641985997406e-05, 0.0001953878802656469,
0.0002986496986476851, 0.00018421070049726713, 4.81293763767467e-05, 5.112357030032566e-05,
6.646169534724244e-05, -5.963383608838427e-05, -0.0002014519218299283, -0.00014379991051999958,
4.721384766914129e-05, 0.00010887944090206427, -9.042957180459008e-06, -8.937102901766956e-05,
-2.3286463674324898e-05, 2.8175296135999322e-05, -5.069602226390861e-05, -9.791530631105358e-05,
6.21130573354161e-05, 0.0003031271412342379, 0.00037444188875405374, 0.0002836575633401526,
0.0002515106878862496, 0.0003314011709056573, 0.00034378355627676777, 0.00022235278995338655,
0.00016012095749886425, 0.0002909770274118122, 0.0004465034382804755, 0.00041025191302385155,
0.00025115187499674424, 0.00018599314392193773, 0.00021820609861828393, 0.00016669052015776196,
1.8445833362031117e-05, -1.7404443525376007e-05, 0.0001404749629988189, 0.0002873497603069011,
0.000244760909563257, 0.00012707965485577323, 0.00012588830416121124, 0.0001906273765009458,
0.00014549192041932968, 2.5452923105788836e-05, 3.897940231287052e-05, 0.00021056084149478755,
0.00031381978911529374, 0.00021983641550926556, 8.340298113239995e-05, 6.662171206498407e-05,
7.907442192919553e-05, -3.002325685421597e-05, -0.00017440749956737958, -0.00015376278107157466,
3.901427690603795e-06, 6.689657140726977e-05, -3.920455267217749e-05, -0.00013318658904599978,
-9.456909026226845e-05, -5.005673090224057e-05, -0.0001220654151569747, -0.00018730404418958508,
-7.355240866992082e-05, 0.00013490155731619093, 0.0002087914218055771, 0.00012500327721399833,
7.56837256170512e-05, 0.0001342207836583948, 0.00015045379568333667, 4.193967848710388e-05,
-3.448647513297456e-05, 6.184249801152658e-05, 0.00020443669650753617, 0.00018707682485328127,
4.3256337923006045e-05, -3.068005224563725e-05, -5.508544000176106e-06, -3.9930217468815856e-05,
-0.00017075886269975486, -0.00021977766112450052, -8.90905453033713e-05, 5.651864070467183e-05,
3.864124539416347e-05, -6.487739782972135e-05, -7.317433589964507e-05, -6.859937147791514e-06,
-2.7071086834807976e-05, -0.00012793982765872789, -0.0001246669907527609, 3.18655540295486e-05,
0.0001504699336191418, 9.23125117798604e-05, -2.3545308223805344e-05, -3.677563962939859e-05,
-7.0038217076636815e-06, -7.951291614906607e-05, -0.00020077791905213284, -0.0001861060825951783,
-3.307982846786039e-05, 5.505553775557276e-05, -1.4433925654104367e-05, -9.250189023257884e-05,
-5.149748846810824e-05, 1.1853346162188325e-05, -2.7716750636688824e-05, -8.004549348952954e-05,
2.0962498719505756e-05, 0.0002256320967771343, 0.00032548847272126824, 0.0002728267344936373,
0.00023319085033374594, 0.0002947480126339575, 0.00033394552510989745, 0.00025716707579216387,
0.00018936650267512025, 0.000273836059967168, 0.00041968922080916425, 0.00043229491745004584,
0.00031574852229334266, 0.0002463148859806898, 0.0002737065140018196, 0.00026057863420792,
0.00015190382882720438, 9.774485610405701e-05, 0.00020734022500634537, 0.00035081233179278,
0.0003526973277338016, 0.00025966631813529185, 0.000240628330139694, 0.0002998806438000458,
0.00029152638917724416, 0.00019804126210966994, 0.00018167524306458225, 0.00031040397018574056,
0.00042478727244096577, 0.00038023402759381674, 0.00026452353528803223, 0.00023378921376278653,
0.00025497414236181563, 0.00019045651107877664, 6.650214095838917e-05, 5.177999001348134e-05,
0.00017330898601026804, 0.0002545355813009234, 0.00018933862517542713, 9.779334389544359e-05,
0.00011131409843118714, 0.0001598948816185096, 0.00011872476653135636, 4.951616086275848e-05,
0.00011029960658620039, 0.0002804207834520509, 0.0003719936128681925, 0.00031787586752800567,
0.0002587895476101244, 0.00029366616369175757, 0.00032351024963971905, 0.0002477208066463657,
0.0001630325268116627, 0.00021223208048399823, 0.00033515871762793234, 0.0003500711414723827,
0.00023670238853713065, 0.00015163789087381343, 0.00016085840471845753, 0.00014760212007789198,
4.325884111384319e-05, -2.7919952009985284e-05, 5.051712786761099e-05, 0.00017958949043897238,
0.00018919929954733518, 9.923349098474257e-05, 6.562403410184836e-05, 0.00011340119115766852,
0.00011230551342491466, 2.6048495058559937e-05, -4.766956291329487e-06, 0.00010193725766375815

};

static __attribute__((aligned(16))) float delay_line_left[FIR_COEFFS_LEN + 4];
static __attribute__((aligned(16))) float delay_line_right[FIR_COEFFS_LEN + 4];

// Входни и изходни буфери
__attribute__((aligned(16))) float fir_input_left[BUFFER_SIZE / 2];
__attribute__((aligned(16))) float fir_input_right[BUFFER_SIZE / 2];
__attribute__((aligned(16))) float fir_output_left[BUFFER_SIZE / 2];
__attribute__((aligned(16))) float fir_output_right[BUFFER_SIZE / 2];

// FIR обекти
static fir_f32_t fir_left;
static fir_f32_t fir_right;

// Инициализация на FIR филтъра
void fir_filter_init(void) {
    dsps_fir_init_f32(&fir_left, fir_coeffs, delay_line_left, FIR_COEFFS_LEN);
    dsps_fir_init_f32(&fir_right, fir_coeffs, delay_line_right, FIR_COEFFS_LEN);
    ESP_LOGI("FIR", "FIR filter initialized with coeff len: %d", FIR_COEFFS_LEN);
}

// Задача за обработка на левия канал
void process_left(void *arg) {
    while (1) {
        ulTaskNotifyTake(pdTRUE, portMAX_DELAY);
        dsps_fir_f32_aes3(&fir_left, fir_input_left, fir_output_left, BUFFER_SIZE / 2);
        xTaskNotifyGive(main_task_handle);
    }
}

// Задача за обработка на десния канал
void process_right(void *arg) {
    while (1) {
        ulTaskNotifyTake(pdTRUE, portMAX_DELAY);
        dsps_fir_f32_aes3(&fir_right, fir_input_right, fir_output_right, BUFFER_SIZE / 2);
        xTaskNotifyGive(main_task_handle);
    }
}

#endif